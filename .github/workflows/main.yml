name: GitHub Actions

on:
  push:
    branches: [master, main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      # Github Actionsã§ã®è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µãƒ³ãƒ—ãƒ«
      # ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã™ã‚‹ã“ã¨ã§ã€masterãƒ–ãƒ©ãƒ³ãƒã«pushã•ã‚ŒãŸéš›ã«ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã„ã€ãƒ“ãƒ«ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ãŒã§ãã‚‹

      # #å…¬å¼ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€Œactions/checkoutã€å®Ÿè¡Œã™ã‚‹ã€‚ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ãã‚‹
      # - name: ğŸ“¦ Get latest code
      #   uses: actions/checkout@v3

      # #nodeã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š
      # - name: ğŸ’» Setup node
      #   uses: actions/setup-node@v3 #å…¬å¼ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹
      #   with: #å¼•æ•°ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®š
      #     node-version: "18"

      # #ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
      # - name: âš¡ Cache node modules
      #   uses: actions/cache@v3
      #   with:
      #     path: node_modules
      #     key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
      #     restore-keys: |
      #       ${{ runner.os }}-node-

      # #node moduleã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
      # - name: ğŸ˜‰ Install modules
      #   run: npm install && npm rebuild --arch=x64 --platform=linux sharp
      #   working-directory: ./ #ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒˆãƒƒãƒ—ã§å®Ÿè¡Œ

      # #ãƒ“ãƒ«ãƒ‰
      # - name: ğŸ¶ Build Project
      #   run: npm run build
      #   working-directory: ./ #ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒˆãƒƒãƒ—ã§å®Ÿè¡Œ

      # #ã‚­ãƒ¼ã®ãƒ‡ã‚³ãƒ¼ãƒ‰
      # - name: ğŸ”‘ generate ssh key
      #   run: echo $PRIVATE_KEY | base64 --decode > key && chmod 600 key
      #   env:
      #     PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}

      # #ãƒ“ãƒ«ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’rsyncã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
      # - name: ğŸ‰ Sync
      #   run: rsync -av -e "ssh -i ./key -p ${SSH_PORT} -o StrictHostKeyChecking=no" ./dist/ "${SSH_USER}:${DOCUMENT_ROOT}/${SSH_REMOTE_PATH}"
      #   env:
      #     SSH_USER: ${{ secrets.SSH_USER }}
      #     SSH_PORT: ${{ secrets.SSH_PORT }}
      #     DOCUMENT_ROOT: ${{ secrets.DOCUMENT_ROOT }}
      #     SSH_REMOTE_PATH: ${{ secrets.SSH_REMOTE_PATH }}

      #Slacké€šçŸ¥ ğŸƒâ€â™‚ï¸
      - name: Slack Notification
        uses: rtCamp/action-slack-notify@v2.2.0
        env:
          SLACK_USERNAME: rtBot (GitHub Actions)
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}
          SLACK_TITLE: masterã«åæ˜ ã•ã‚Œã¾ã—ãŸğŸ‰
          SLACK_COLOR: good
          SLACK_MESSAGE: ${{ github.event.repository.url }}
          MSG_MINIMAL: true
